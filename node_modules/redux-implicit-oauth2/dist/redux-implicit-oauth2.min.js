!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ReduxImplicitOAuth2=t():e.ReduxImplicitOAuth2=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.LOGIN_REQUEST="LOGIN_REQUEST",o=t.LOGIN_SUCCESS="LOGIN_SUCCESS",i=t.LOGIN_FAILURE="LOGIN_FAILURE",u=t.LOGOUT="LOGOUT";t.loginSuccess=function(e,t){return{type:o,token:e,expiresAt:t}},t.loginFailure=function(e){return{type:i,error:e}},t.login=function(e){return{type:r,config:e}},t.logout=function(){return{type:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.getExpiresAt=function(){return Number(window.localStorage.getItem("expiresAt"))||null},o=(t.hasToken=function(){return null!==o()},t.getToken=function(){var e=r();return null===e||e>Date.now()?window.localStorage.getItem("token")||null:null});t.setToken=function(e,t){window.localStorage.setItem("token",e),null!==t?window.localStorage.setItem("expiresAt",t):window.localStorage.removeItem("expiresAt")},t.removeToken=function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("expiresAt")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.authReducer=t.authMiddleware=t.logout=t.login=t.LOGOUT=t.LOGIN_FAILURE=t.LOGIN_SUCCESS=t.LOGIN_REQUEST=undefined;var o=n(0),i=n(3),u=r(i),c=n(11),a=r(c);t.LOGIN_REQUEST=o.LOGIN_REQUEST,t.LOGIN_SUCCESS=o.LOGIN_SUCCESS,t.LOGIN_FAILURE=o.LOGIN_FAILURE,t.LOGOUT=o.LOGOUT,t.login=o.login,t.logout=o.logout,t.authMiddleware=u["default"],t.authReducer=a["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4),i=function(e){return e&&e.__esModule?e:{"default":e}}(o),u=n(0),c=function(e){return function(t){return function(n){switch(n.type){case u.LOGIN_REQUEST:return(0,i["default"])(n.config).then(function(t){var n=t.token,r=t.expiresAt;return e.dispatch((0,u.loginSuccess)(n,r))},function(t){return e.dispatch((0,u.loginFailure)(t))});case u.LOGIN_SUCCESS:(0,r.setToken)(n.token,n.expiresAt);break;case u.LOGIN_FAILURE:case u.LOGOUT:(0,r.removeToken)()}return t(n)}}};t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=r(o),u=n(9),c=r(u),a=n(10),s=r(a),l=function d(e,t,n,r){var o=void 0;try{o=e.location.hash}catch(s){}if(o){e.close();var u=i["default"].parse(o.substr(1));if(u.state!==t&&r("Invalid state returned."),u.access_token){var c=u.expires_in?parseInt(u.expires_in):NaN,a={token:u.access_token,expiresAt:isNaN(c)?null:Date.now()+1e3*c};n(a)}else r(u.error||"Unknown error.")}else e.closed?r("Authentication was cancelled."):setTimeout(function(){return d(e,t,n,r)},100)},f=function(e){var t=(0,c["default"])(),n=i["default"].stringify({state:t,response_type:"token",client_id:e.client,scope:e.scope,redirect_uri:e.redirect}),r=e.url+(-1===e.url.indexOf("?")?"?":"&")+n,o=e.width||400,u=e.height||400,a=(0,s["default"])(r,"oauth2",o,u);return new Promise(function(e,n){return l(a,t,e,n)})};t["default"]=f},function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}function o(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(r[e]=n);r[e]===undefined&&(r[e]={}),r[e][t[1]]=n};case"bracket":return function(e,n,r){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?r[e]===undefined?void(r[e]=[n]):void(r[e]=[].concat(r[e],n)):void(r[e]=n)};default:return function(e,t,n){if(n[e]===undefined)return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function i(e,t){return t.encode?t.strict?c(e):encodeURIComponent(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var c=n(6),a=n(7),s=n(8);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=a({arrayFormat:"none"},t);var n=o(t),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):undefined;i=i===undefined?null:s(i),n(s(o),i,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=u(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){t=a({encode:!0,strict:!0,arrayFormat:"none"},t);var n=r(t);return e?Object.keys(e).sort().map(function(r){var o=e[r];if(o===undefined)return"";if(null===o)return i(r,t);if(Array.isArray(o)){var u=[];return o.slice().forEach(function(e){e!==undefined&&u.push(n(r,e,u.length))}),u.join("&")}return i(r,t)+"="+i(o,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";function r(e){if(null===e||e===undefined)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var n,c,a=r(e),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var l in n)i.call(n,l)&&(a[l]=n[l]);if(o){c=o(n);for(var f=0;f<c.length;f++)u.call(n,c[f])&&(a[c[f]]=n[c[f]])}}return a}},function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],r(n),r(o))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(u),n=1;n<t.length;n++)e=r(t,n).join(""),t=e.match(u);return e}}function i(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=c.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(s){var r=o(n[0]);r!==n[0]&&(t[n[0]]=r)}n=c.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),u=0;u<i.length;u++){var a=i[u];e=e.replace(new RegExp(a,"g"),t[a])}return e}var u=new RegExp("%[a-f0-9]{2}","gi"),c=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return i(e)}}},function(e,t,n){!function(t){"use strict";var n=0,r=Math.pow(36,4),o=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},i=function(){return o((Math.random()*r<<0).toString(36),4)},u=function(){return n=n<r?n:0,++n-1},c=function(){var e,t=(new Date).getTime().toString(36),n=c.fingerprint(),r=i()+i();return e=o(u().toString(36),4),"c"+t+e+n+r};c.slug=function(){var e,t=(new Date).getTime().toString(36),n=c.fingerprint().slice(0,1)+c.fingerprint().slice(-1),r=i().slice(-2);return e=u().toString(36).slice(-4),t.slice(-2)+e+n+r},c.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return c.globalCount=function(){return e},e},c.fingerprint=function(){return o((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+c.globalCount().toString(36),4)},t.register?t.register("cuid",c):e.exports=c}(this.applitude||this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=window.screenLeft||window.screenX,r=window.screenTop||window.screenY,o=n+window.innerWidth/2-e/2;return"width="+e+",height="+t+",top="+(r+window.innerHeight/2-t/2)+",left="+o},o=function(e,t,n,o){return window.open(e,t,"scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no,"+r(n,o))};t["default"]=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),i=n(0),u={isLoggedIn:(0,o.hasToken)(),token:(0,o.getToken)(),expiresAt:(0,o.getExpiresAt)(),isLoggingIn:!1,error:null},c=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:u,t=arguments[1];switch(t.type){case i.LOGIN_REQUEST:return r({},e,{isLoggingIn:!0});case i.LOGIN_SUCCESS:return r({},e,{isLoggedIn:!0,token:t.token,expiresAt:t.expiresAt,error:null,isLoggingIn:!1});case i.LOGIN_FAILURE:return r({},e,{isLoggedIn:!1,token:null,expiresAt:null,error:t.error,isLoggingIn:!1});case i.LOGOUT:return r({},e,{isLoggedIn:!1,token:null,expiresAt:null,error:null,isLoggingIn:!1});default:return e}};t["default"]=c}])});